<div [ngClass]="{'parlamentar-wrapper': !isCollapsed, 'parlamentar-wrapper-no-margin': isCollapsed}">
  <div
    class="parlamentar-card-actions"
    [hidden]="isCollapsed"
  >
    <!-- TODO: área reservada para implementação futura (e.g. seguir o parlamentar) -->
    <!-- <button
      type="button"
      class="btn btn-link btn-icon"
      (click)="toggleFollow()"
    >
      <span class="icon-bookmark"></span>
    </button> -->
  </div>

  <div class="parlamentar-card-sm">
    <div class="parlamentar-card-sm-body">
      <div class="d-flex">
        <div class="parlamentar-card-sm-id">{{id}}°</div>
        <div
          class="parlamentar-card-sm-title"
          [@show]="view !== VIEW_SM ? 'hide' : 'show'"
        >
          <a
            class="btn-link-simple"
            [routerLink]="['/parlamentar', parlamentar.idParlamentarVoz]"
          >
            {{ parlamentar.nomeEleitoral | titlecase }}
          </a>
        </div>
      </div>
      <div
        class="parlamentar-card-sm-score"
        [@show]="view !== VIEW_SM ? 'hide' : 'show'"
      >
        <div class="parlamentar-sm-progress">
          <app-progress
            [value]="alinhamento?.alinhamento"
            [min]="0"
            [max]="100"
            [showAxis]="false"
          ></app-progress>
        </div>
        <div class="parlamentar-sm-score">
          {{ alinhamento?.alinhamento | percent }}
        </div>
      </div>
    </div>
  </div>
  <div
    class="parlamentar-card"
    [@openClose]="view !== VIEW_SM ? 'open' : 'closed'"
    (@openClose.start)="onAnimationStart($event)"
    (@openClose.done)="onAnimationEnd($event)"
  >
    <div class="parlamentar-card-body">
      <div class="row gutters-sm">
        <div class="col-3">
          <a [routerLink]="['/parlamentar', parlamentar.idParlamentarVoz]">
            <img
              [defaultImage]="'assets/imgs/nophoto.png'"
              [lazyLoad]="parlamentar.getFoto()"
              [offset]="100"
              width="100%"
            >
          </a>
        </div>
        <div class="col-9">
          <div class="parlamentar-title">{{ parlamentar.nomeEleitoral | titlecase }}</div>
          <p>
            {{ parlamentar.partido }}/{{ parlamentar.uf }}
          </p>
          <div class="row no-gutters">
            <div class="col">
              <span
                *ngIf="alinhamento?.tema_nome"
                class="parlamentar-compatibilidade-text"
                style="display: inline-block"
              >
                Compatibilidade com {{alinhamento?.tema_nome}}
              </span>
              <span
                *ngIf="!alinhamento?.tema_nome"
                class="parlamentar-compatibilidade-text"
              >
                Compatibilidade geral
              </span>
              <app-progress
                [value]="alinhamento?.alinhamento"
                [min]="0"
                [max]="100"
                [showAxis]="true"
              ></app-progress>
            </div>
            <div class="col-3 col-sm-2 d-flex justify-content-end align-items-center">
              <div class="parlamentar-score">
                {{ alinhamento?.alinhamento | percent }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="parlamentar-card-lg"
        [@openClose]="view !== VIEW_LG ? 'closed' : 'open'"
      >
        <div class="pt-3"></div>
        <div class="parlamentar-compatibilidade-text text-center mb-3">
          Compatilidade por tema [em nº de questões]
        </div>
        <app-progress-stacked
          *ngFor="let alinhamento of parlamentar.alinhamento.temas"
          [titulo]="alinhamento.tema_nome"
          [total]="alinhamento.totalPerguntas"
          [concordancia]="alinhamento.respostasIguais"
          [discordancia]="alinhamento.perguntasIguais - alinhamento.respostasIguais"
          [passo]="passo"
        ></app-progress-stacked>
      </div>
      <div class="text-right">
        <a
          class="btn btn-link"
          [routerLink]="['/parlamentar', parlamentar.idParlamentarVoz]"
          [queryParams]="{tema: temaSlug}"
        >
          + detalhes
        </a>
      </div>
    </div>
  </div>

</div>
